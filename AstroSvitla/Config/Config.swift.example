//
//  Config.swift.example
//  AstroSvitla
//
//  Copy this file to Config.swift and fill in the required secrets
//  before building the app locally. The real Config.swift file is
//  gitignored and must never be committed.
//

import Foundation

enum Config {

    /// Refer to `specs/005-enhance-astrological-report/quickstart.md` for instructions on how to populate these placeholders.

    // MARK: - OpenAI Configuration

    /// Replace with your project-specific OpenAI project identifier
    static let openAIProjectID = "YOUR_OPENAI_PROJECT_ID_HERE"

    /// Replace with your project-specific OpenAI API key
    static let openAIAPIKey = "YOUR_OPENAI_API_KEY_HERE"

    /// Identifier of the OpenAI vector store that contains the astrology knowledge base
    static let openAIVectorStoreID = "YOUR_OPENAI_VECTOR_STORE_ID_HERE"

    /// OpenAI model to use for report generation
    static let openAIModel = "gpt-4o"

    /// Base URL for OpenAI API requests
    static let openAIBaseURL = "https://api.openai.com/v1"

    // MARK: - Astrology API Configuration (api.astrology-api.io)

    /// Base URL for Astrology API requests
    static let astrologyAPIBaseURL = "https://api.astrology-api.io/api/v3"

    /// Bearer token for Astrology API (see quickstart.md); do not commit real keys
    static let astrologyAPIKey = "YOUR_ASTROLOGY_API_KEY_HERE"

    /// Rate limiting configuration for Astrology API
    static let astrologyAPIRateLimitRequests = 10
    static let astrologyAPIRateLimitTimeWindow: TimeInterval = 60

    /// Request timeout for Astrology API calls
    static let astrologyAPIRequestTimeout: TimeInterval = 30

    // MARK: - App Configuration

    static let appVersion = "1.0.0"
    static let buildNumber = "1"
    static let bundleIdentifier = "com.astrosvitla.astroinsight"

    // MARK: - Feature Flags

    static let debugLoggingEnabled = true
    static let analyticsEnabled = false
    
    // MARK: - RevenueCat Configuration
    
    /// RevenueCat public API key
    /// Get this from RevenueCat Dashboard: Project Settings â†’ API Keys
    static let revenueCatAPIKey = "YOUR_REVENUECAT_API_KEY_HERE"

    // MARK: - Validation Helpers

    static var isOpenAIConfigured: Bool {
        openAIAPIKey.isEmpty == false &&
        openAIAPIKey != "YOUR_OPENAI_API_KEY_HERE"
    }

    static var isAstrologyAPIConfigured: Bool {
        astrologyAPIKey.isEmpty == false &&
        astrologyAPIKey != "YOUR_ASTROLOGY_API_KEY_HERE"
    }

    static func validate() throws {
        guard isOpenAIConfigured else {
            throw ConfigError.missingAPIKey("OpenAI API key not configured in Config.swift")
        }

        guard isAstrologyAPIConfigured else {
            throw ConfigError.missingAPIKey("Astrology API key not configured in Config.swift")
        }
    }
}

enum ConfigError: LocalizedError {
    case missingAPIKey(String)

    var errorDescription: String? {
        switch self {
        case .missingAPIKey(let message):
            return message
        }
    }
}
